<html>
  <head>
    <title>Generators</title>
  </head>

  <body>
    <a href="/exercises/">Go back</a>
    <p><em>Open console</em></p>

    <script>
      // Los generadores son funciones de las que se puede salir y volver a entrar.
      // Su contexto (asociación de variables) será conservado entre las reentradas.
      // Cada vez que llamamos next, la ejecución del generador va a continuar hasta el proximo yield
      function* simpleGenerator() {
        console.log("GENERATOR START");        
        yield 1;
        yield 2;
        yield 3;
        console.log("GENERATOR END");
      }

      //   const gen = simpleGenerator();

      // We can make infinite generators
      function* idMaker() {
          let id = 1;
          while (true) {
              yield id;
              id = id + 1;
          }
      }

      // When we call next we can also pass values that the function receives.
      function* idMakerWithReset() {
          let id = 1;
          let reset;
          while (true) {
              reset = yield id;
              if (reset) {
                  id = 1;
              } else {
                  id = id + 1;
              }
          }
      }

      // Now let's do a slightly more complex example: the fibonacci sequence
      function* fibonacci() {
          let a = 1;
          let b = 1;
          while(true) {
              const nextNumber = a + b;
              a = b;
              b = nextNumber;
              yield nextNumber;
          } 
      }
    </script>
  </body>
</html>
